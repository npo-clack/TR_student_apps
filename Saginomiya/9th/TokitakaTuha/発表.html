<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å¤šæ©Ÿèƒ½ãƒ¡ãƒ¢å¸³</title>
  <style>
    body {
      font-family:"fantasy";
      background: #c3c3c3;
      padding: 20px;
    }
    input, textarea, button {
      font-size: 16px;
      margin-bottom: 10px;
    }
    input[type="text"] {
      width: 40%;
      padding: 8px;
      border-radius: 10px;
      border-color: #c3c3c3
     
    }
    textarea {
      width: 98%;
      height: 250px;
      padding: 10px;
      border-color: #c3c3c3;
      border-radius: 10px;
    }
    button {
      padding: 10px 15px;
      margin-right: 10px;
      border-color: #c3c3c3;
      border-radius: 10px;
    }
    #lastSaved {
      font-size: 14px;
      color: #cb1c1c;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>å¤šæ©Ÿèƒ½ãƒ¡ãƒ¢å¸³</h1>

  <input type="text" id="title" placeholder="ãƒ¡ãƒ¢ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›">
  <br>

  <input type="text" id="search" placeholder="ãƒ¡ãƒ¢å†…æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰" oninput="highlightSearch()">
  <br>

  <textarea id="memo" placeholder="ã“ã“ã«ãƒ¡ãƒ¢ã‚’æ›¸ã„ã¦ãã ã•ã„..."></textarea>
  <br>

  <button onclick="saveNote()">ä¿å­˜</button>
  <button onclick="loadNote()">èª­ã¿è¾¼ã¿</button>
  <button onclick="deleteNote()">å‰Šé™¤</button>

  <div id="lastSaved">ğŸ•’ æœ€çµ‚ä¿å­˜: ãªã—</div>

  <script>
    const memoField = document.getElementById('memo');
    const titleField = document.getElementById('title');
    const searchInput = document.getElementById('search');
    const lastSaved = document.getElementById('lastSaved');

    function saveNote() {
      const title = titleField.value.trim();
      if (!title) {
        alert('ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }

      const content = memoField.value;
      const now = new Date().toLocaleString('ja-JP');

      localStorage.setItem(`memo_${title}`, content);
      localStorage.setItem(`memoTime_${title}`, now);

      alert(`"${title}" ã‚’ä¿å­˜ã—ã¾ã—ãŸ`);
      lastSaved.textContent = 'ğŸ•’ æœ€çµ‚ä¿å­˜: ' + now;
    }

    function loadNote() {
      const title = titleField.value.trim();
      if (!title) {
        alert('ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }

      const content = localStorage.getItem(`memo_${title}`);
      const time = localStorage.getItem(`memoTime_${title}`);

      if (content === null) {
        alert(`"${title}" ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`);
        return;
      }

      memoField.value = content;
      lastSaved.textContent = time ? 'ğŸ•’ æœ€çµ‚ä¿å­˜: ' + time : 'ğŸ•’ æœ€çµ‚ä¿å­˜: ä¸æ˜';
      alert(`"${title}" ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`);
    }

    function deleteNote() {
      const title = titleField.value.trim();
      if (!title) {
        alert('ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }

      const confirmDelete = confirm(`"${title}" ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã„ã§ã™ã‹ï¼Ÿ`);
      if (confirmDelete) {
        localStorage.removeItem(`memo_${title}`);
        localStorage.removeItem(`memoTime_${title}`);
        memoField.value = '';
        lastSaved.textContent = 'ğŸ•’ æœ€çµ‚ä¿å­˜: ãªã—';
        alert(`"${title}" ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`);
      }
    }

    function highlightSearch() {
      const keyword = searchInput.value;
      const text = memoField.value;

      const index = text.indexOf(keyword);

      if (keyword === '') {
        searchInput.style.backgroundColor = '';
        return;
      }

      if (index === -1) {
        searchInput.style.backgroundColor = '#ffd6d6'; // èµ¤ã£ã½ã„ï¼ˆè¦‹ã¤ã‹ã‚‰ãªã„ï¼‰
      } else {
        searchInput.style.backgroundColor = '#d6ffd6'; // ç·‘ã£ã½ã„ï¼ˆè¦‹ã¤ã‹ã£ãŸï¼‰

        // ã‚¸ãƒ£ãƒ³ãƒ—ã—ã¦é¸æŠ
        memoField.focus();
        memoField.setSelectionRange(index, index + keyword.length);
      }
    }
  </script>
</body>
</html>

